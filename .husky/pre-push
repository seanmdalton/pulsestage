#!/usr/bin/env sh

echo "ğŸ” Running pre-push checks..."

# Run linting for API only (Web linting temporarily disabled due to remaining issues)
echo "ğŸ“ Checking API code quality..."
npm run lint:api
API_EXIT_CODE=$?

# Only fail if there are actual errors (exit code 1), not warnings (exit code 2)
if [ $API_EXIT_CODE -eq 1 ]; then
  echo "âŒ API linting failed with errors. Please fix the errors before pushing."
  echo "ğŸ’¡ Warnings are allowed but errors must be fixed."
  exit 1
fi

echo "âœ… API pre-push checks passed!"
echo "â„¹ï¸  Web linting temporarily disabled - will be re-enabled after CI validation"
